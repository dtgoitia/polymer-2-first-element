<link rel="import" href="../../../polymer/polymer-element.html">
<link rel="import" href="./filter-price.html">
<link rel="import" href="./filter-make.html">
<link rel="import" href="./filter-more.html">
<link rel="import" href="./filter-year.html">

<dom-module id="car-filter">
  <template>
    <custom-style>
      <style>
        /* shadow DOM styles go here */
        :host {
          --primary-color: #408cff;
          --background-color: #616161;
          --text-color: rgba(0,0,0,0.8);

          flex: none;
          display: inline-block;
          width: 326px;
          min-height: 535px;
          padding-bottom: 2.7em;
          padding-top: 1em;
          padding-left: 3.5em;
          font-family: 'Roboto', 'Noto', Arial, Helvetica, sans-serif;
          background-color: white;
          box-shadow: 0 5px 15px rgba(32, 32, 32, 0.6);
          color: var(--text-color);
          
          margin-top: 25px;
          margin-right: 25px;

          vertical-align: top;
        }
      </style>
    </custom-style>
    
    <div>
      <h1 on-click='handleFilterUpdate'>Filters</h1>
      <filter-price
        prices={{filterData.price}}
        update-results={{updateResults}}
      >
      </filter-price>
      <filter-make
        makes={{filterData.make}}
        shownMakes={{filterData.make}}
        update-results={{updateResults}}
      >
      </filter-make>
      <filter-year
        years={{filterData.year}}
        update-results={{updateResults}}
      >
      </filter-year>
    </div>
    
  </template>
  <script>
    class CarFilter extends Polymer.Element {
      static get is() { return "car-filter"; }
      static get properties() {
        return {
          filterData: {
            type: Object
          },
          updateResults: { type: Function }
        }
      }

      static get observers() {
        return [
          // Observer method name, followed by a list of dependencies, in parenthesis
          'filterDataChanged(filterData.*)'
        ]
      }

      filterDataChanged(changes) {
        // console.log('CarFilter.filterDataChanged()', changes);
        // console.log('  notifying change at', changes.path, 'to', changes.value);
        this.updateResults();
      }
    }

    customElements.define(CarFilter.is, CarFilter);
  </script>
</dom-module>